{"version":3,"sources":["main.js"],"names":["Mask","selector","regExpString","elements","document","querySelectorAll","_listeners","i","length","input","addEventListener","_mask","bind","pos","elem","focus","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","select","event","matrix","def","replace","val","target","value","a","test","charAt","type","_setCursorPosition","utils","cache","fileInputs","Map","mediaBreakpoint","sm","md","lg","xl","xxl","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","svgIcons","container","querySelector","path","getAttribute","xhr","XMLHttpRequest","onload","innerHTML","responseText","open","send","detectIE","ua","window","msie","indexOf","ieV","parseInt","substring","className","trident","rv","edge","truncateText","cutText","text","elemMaxHeight","getComputedStyle","maxHeight","elemHeight","offsetHeight","shave","cutTextListener","throttle","callback","limit","wait","call","setTimeout","getScreenSize","screenSize","getPropertyValue","polyfills","ELEMENT","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","closest","parentElement","Element","prototype","hasClass","RegExp","Number","isNaN","Array","from","toStr","Object","toString","isCallable","fn","toInteger","number","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","len","min","max","arrayLike","C","items","TypeError","mapFn","arguments","undefined","T","A","k","kValue","states","TYPE_ACTIVE","ITEM_ANIMATED","FILTERS_TYPE","CURRENT_TYPE","ITEMS","MyList","parent","id","optionsList","_id","_optionsList","_parent","list","_initList","options","valueNames","data","concat","List","boolean","classList","remove","add","currentType","dataset","typeFilter","filter","item","values","itemsToggleAnimated","navItemsArr","forEach","getElementById","console","error","_initListPlugin","filterList","CheckboxSelect","el","toggle","valueEl","checkboxes","that","textContent","checked","e","changeCurrentValue","$","contains","FileInput","file","img","createElement","src","URL","createObjectURL","alt","name","setAttribute","video","index","div","append","createImage","createVideo","_files","dropdown","dropdownValue","dropdownList","addFiles","newFiles","files","listItem","createListItem","push","before","updateDropdown","innerText","APP","initBefore","documentElement","init","lazyload","myMask","buttons","initParallax","initFirstSlider","initReviewsSlider","initArticlesSlider","initProfileSlider","initAccordion","initCalendar","initTabs","initPriceList","addFormValidate","initSelect","initStarsSelect","initRatingSelect","initCheckboxSelect","initPerformersMap","initPerformersFilter","initRangeSLider","initModals","initGallery","initFileInput","initAvatarInput","initScrollBlock","initAddPetBlock","initPetCardEvents","initBirthdayCalendar","initDeleteBlock","initOnLoad","body","preventDefault","position","currentTarget","attr","offset","top","animate","scrollTop","duration","easing","update","myLazyLoad","objectFitFallback","regularInit","LazyLoad","elements_selector","callback_error","style","imgUrl","dataFit","fitStyle","backgroundImage","scenes","parallaxInstance","Parallax","sliderBlock","firstSlider","Swiper","speed","effect","fadeEffect","crossFade","watchOverflow","navigation","prevEl","nextEl","pagination","thumbSLiderBlock","thumbSLider","allowTouchMove","slider","spaceBetween","thumbs","swiper","articlesSlider","slidesPerView","breakpoints","profileSlider","accordion","Accordion","closeOthers","calendarBlocks","calendar","datePicker","startDateinput","endDateinput","datepicker","dateFormat","minDate","Date","onSelect","formattedDate","split","startDate","endDate","calendars","myDate","autoClose","selectDate","tabBlocks","block","responsiveTabs","setHash","hasAttribute","activate","evt","tab","tabThumb","activeTab","navigationCoords","getBoundingClientRect","activeTabCoords","width","offsetWidth","left","listBlock","listToggles","priceList","navItemRemoveActive","forms","formValidate","$form","validator","methods","email","element","optional","addMethod","compareValue","findByName","compareName","validate","wrapper","errorElement","rules","phone","mobileRU","passwordRepeat","errorPlacement","next","highlight","addClass","unhighlight","removeClass","submitHandler","form","formData","FormData","fileInput","cacheFileInput","get","set","getFiles","ajax","url","action","processData","contentType","success","reset","magnificPopup","close","selectOptions","minimumResultsForSearch","Infinity","doc","selects","placeholder","select2","dropdownParent","on","selectStars","formatStarState","state","MAX_STARS","stars","quantity","starString","templateResult","templateSelection","selectRating","formatStarStateResult","formatStarStateSelection","performersDataMap","sticky","stickyMap","Sticky","destroy","toggleButton","sliders","inputs","step","startMin","startMax","noUiSlider","create","start","parseFloat","connect","tooltips","format","wNumb","decimals","inputMin","inputMax","handle","callbacks","ajaxContentAdded","$modalContent","content","find","each","delete","removalDelay","mainClass","fixedContentPos","fixedBgPos","showCloseBtn","galleries","gallery","delegate","enabled","navigateByImgClick","preload","elementParse","avatarInputs","inputBlock","scrollBlocks","axis","mCustomScrollbar","addPetBlock","toggleAddPetBlock","clientWidth","translateX","transform","closeAddPetBlock","CONTENT_PADDING_BOTTOM","blocks","toggleActiveDeleteHandler","deleteBlock","height","deleteDropdown","isTopDropdown","clientHeight","closeDeleteHandler","deleteHandler","deleteButton","classElement","deleteElement","done","noButton","yesButton","removeEventListener","fail","cards","hideBlock","activeContent","inactiveContent","stopPropagation","activeCards","card","hideBlockOther","slideUp","slideDown","activeEl"],"mappings":"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","file":"main.js","sourcesContent":["class Mask {\n  constructor(selector, regExpString = '+7 (___) ___-__-__') {\n    this.elements = document.querySelectorAll(selector);\n    this.regExpString = regExpString;\n  }\n\n  init() {\n    this._listeners(this.elements);\n  }\n\n  _listeners(selector) {\n    for (let i = 0; i < selector.length; i++) {\n      const input = selector[i];\n      input.addEventListener('input', this._mask.bind(this), false);\n      input.addEventListener('focus', this._mask.bind(this), false);\n      input.addEventListener('blur', this._mask.bind(this), false);\n    }\n  }\n\n  _setCursorPosition(pos, elem) {\n    elem.focus();\n    if (elem.setSelectionRange) {\n      elem.setSelectionRange(pos, pos);\n    } else if (elem.createTextRange) {\n      const range = elem.createTextRange();\n      range.collapse(true);\n      range.moveEnd('character', pos);\n      range.moveStart('character', pos);\n      range.select();\n    }\n  }\n\n  _mask(event) {\n    let matrix = this.regExpString,\n      i = 0,\n      def = matrix.replace(/\\D/g, ''),\n      val = event.target.value.replace(/\\D/g, '');\n    if (def.length >= val.length) {\n      val = def;\n    }\n    event.target.value = matrix.replace(/./g, function(a) {\n      return /[_\\d]/.test(a) && i < val.length ? val.charAt(i++) : i >= val.length ? '' : a\n    });\n    if (event.type == 'blur') {\n      if (event.target.value.length == 2) {\n        event.target.value = '';\n      }\n    } else {\n      this._setCursorPosition(event.target.value.length, event.target);\n    }\n  }\n}\n\nconst utils = {\n  cache: {\n    fileInputs: new Map(),\n  },\n  // сет брейкпоинтов для js\n  // должны совпадать с теми что в body:after\n  mediaBreakpoint: {\n    sm: 576,\n    md: 768,\n    lg: 1200,\n    xl: 1366,\n    xxl: 1920,\n  },\n  isMobile: {\n    Android() {\n      return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry() {\n      return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS() {\n      return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera() {\n      return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows() {\n      return navigator.userAgent.match(/IEMobile/i);\n    },\n    any() {\n      return (this.Android() || this.BlackBerry() || this.iOS() || this.Opera() || this.Windows());\n    },\n  },\n  svgIcons() {\n    const container = document.querySelector('[data-svg-path]');\n    const path = container.getAttribute('data-svg-path');\n    const xhr = new XMLHttpRequest();\n    xhr.onload = () => {\n      container.innerHTML = xhr.responseText;\n    };\n    xhr.open('get', path, true);\n    xhr.send();\n  },\n  detectIE() {\n    /**\n     * detect IE\n     * returns version of IE or false, if browser is not Internet Explorer\n     */\n\n     (function detectIE() {\n       var ua = window.navigator.userAgent;\n\n       var msie = ua.indexOf('MSIE ');\n       if (msie > 0) {\n        // IE 10 or older => return version number\n        var ieV = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n        document.querySelector('body').className += ' IE';\n      }\n\n      var trident = ua.indexOf('Trident/');\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = ua.indexOf('rv:');\n        var ieV = parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n        document.querySelector('body').className += ' IE';\n      }\n\n      var edge = ua.indexOf('Edge/');\n      if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        var ieV = parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n        document.querySelector('body').className += ' IE';\n      }\n\n      // other browser\n      return false;\n    })();\n  },\n  truncateText(elements) {\n    const cutText = () => {\n      for (let i = 0; i < elements.length; i++) {\n        const text = elements[i];\n        const elemMaxHeight = parseInt(getComputedStyle(text).maxHeight, 10);\n        const elemHeight = text.offsetHeight;\n        const maxHeight = elemMaxHeight ? elemMaxHeight : elemHeight;\n\n        shave(text, maxHeight);\n      }\n    };\n\n    this.cache.cutTextListener = this.throttle(cutText, 100);\n\n    cutText();\n\n    window.addEventListener('resize', this.cache.cutTextListener);\n  },\n  throttle(callback, limit) {\n    let wait = false;\n\n    return () => {\n      if (!wait) {\n        callback.call();\n        wait = true;\n        setTimeout(() => {\n          wait = false;\n        }, limit);\n      }\n    };\n  },\n  getScreenSize() {\n    let screenSize = window.getComputedStyle(document.querySelector('body'), ':after').getPropertyValue('content');\n    screenSize = parseInt(screenSize.match(/\\d+/), 10);\n    return screenSize;\n  },\n  polyfills() {\n    /**\n     * polyfill for elem.closest\n     */\n    (function(ELEMENT) {\n      ELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n      ELEMENT.closest = ELEMENT.closest || function closest(selector) {\n        if (!this) return null;\n        if (this.matches(selector)) return this;\n        if (!this.parentElement) {\n          return null;\n        } else {\n          return this.parentElement.closest(selector);\n        } \n      };\n    }(Element.prototype));\n\n    /**\n     * polyfill for elem.hasClass\n     */\n    Element.prototype.hasClass = function(className) {\n      return this.className && new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(this.className);\n    };\n\n    Number.isNaN = Number.isNaN || function(value) {\n      return typeof value === 'number' && isNaN(value);\n    };\n\n    // Шаги алгоритма ECMA-262, 6-е издание, 22.1.2.1\n    // Ссылка: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-array.from\n    if (!Array.from) {\n      Array.from = (function() {\n        var toStr = Object.prototype.toString;\n        var isCallable = function(fn) {\n          return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n        };\n        var toInteger = function (value) {\n          var number = Number(value);\n          if (isNaN(number)) { return 0; }\n          if (number === 0 || !isFinite(number)) { return number; }\n          return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n        };\n        var maxSafeInteger = Math.pow(2, 53) - 1;\n        var toLength = function (value) {\n          var len = toInteger(value);\n          return Math.min(Math.max(len, 0), maxSafeInteger);\n        };\n\n        // Свойство length метода from равно 1.\n        return function from(arrayLike/*, mapFn, thisArg */) {\n          // 1. Положим C равным значению this.\n          var C = this;\n\n          // 2. Положим items равным ToObject(arrayLike).\n          var items = Object(arrayLike);\n\n          // 3. ReturnIfAbrupt(items).\n          if (arrayLike == null) {\n            throw new TypeError('Array.from requires an array-like object - not null or undefined');\n          }\n\n          // 4. Если mapfn равен undefined, положим mapping равным false.\n          var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n          var T;\n          if (typeof mapFn !== 'undefined') {\n            // 5. иначе\n            // 5. a. Если вызов IsCallable(mapfn) равен false, выкидываем исключение TypeError.\n            if (!isCallable(mapFn)) {\n              throw new TypeError('Array.from: when provided, the second argument must be a function');\n            }\n\n            // 5. b. Если thisArg присутствует, положим T равным thisArg; иначе положим T равным undefined.\n            if (arguments.length > 2) {\n              T = arguments[2];\n            }\n          }\n\n          // 10. Положим lenValue равным Get(items, \"length\").\n          // 11. Положим len равным ToLength(lenValue).\n          var len = toLength(items.length);\n\n          // 13. Если IsConstructor(C) равен true, то\n          // 13. a. Положим A равным результату вызова внутреннего метода [[Construct]]\n          //     объекта C со списком аргументов, содержащим единственный элемент len.\n          // 14. a. Иначе, положим A равным ArrayCreate(len).\n          var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n          // 16. Положим k равным 0.\n          var k = 0;\n          // 17. Пока k < len, будем повторять... (шаги с a по h)\n          var kValue;\n          while (k < len) {\n            kValue = items[k];\n            if (mapFn) {\n              A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n            } else {\n              A[k] = kValue;\n            }\n            k += 1;\n          }\n          // 18. Положим putStatus равным Put(A, \"length\", len, true).\n          A.length = len;\n          // 20. Вернём A.\n          return A;\n        };\n      }());\n    }\n  },\n};\n\nconst states = {\n  TYPE_ACTIVE: 'active',\n  ITEM_ANIMATED: ['animated-show', 'animated-hide'],\n};\nconst elements = {\n  FILTERS_TYPE: '[data-type-filter]',\n  CURRENT_TYPE: `[data-type-filter].${states.TYPE_ACTIVE}`,\n  ITEMS: '[data-type]',\n};\n\nclass MyList {\n  constructor(parent, id, optionsList = []) {\n    this._id = id;\n    this._optionsList = optionsList;\n    this._parent = parent;\n    this.list = [];\n\n    this._initList();\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  _initListPlugin() {\n    const options = {\n      valueNames: [\n        {data: ['type'],}\n      ],\n    };\n\n    if (this._optionsList.length) {\n      options.valueNames = options.valueNames.concat(...this._optionsList);\n    }\n\n    this.list = new List(this._id, options);\n  }\n\n  itemsToggleAnimated(boolean) {\n    const list = this._parent.querySelector('.js-list');\n\n    if (boolean) {\n      list.classList.remove(states.ITEM_ANIMATED[1]);\n      list.classList.add(states.ITEM_ANIMATED[0]);\n    } else {\n      list.classList.remove(states.ITEM_ANIMATED[0]);\n      list.classList.add(states.ITEM_ANIMATED[1]);\n    }\n  }\n\n  filterList() {\n    const currentType = this._parent.querySelector(elements.CURRENT_TYPE).dataset.typeFilter;\n\n    if (currentType !== 'all') {\n      this.list.filter((item) => {\n        return currentType === item.values().type;\n      });\n    } else {\n      this.list.filter();\n    }\n\n    this.itemsToggleAnimated(true);\n  }\n\n  navItemRemoveActive() {\n    const navItemsArr = Array.from(this._parent.querySelectorAll(elements.FILTERS_TYPE));\n\n    navItemsArr.forEach((item) => {\n      item.classList.remove(states.TYPE_ACTIVE);\n    });\n  }\n\n  _initList() {\n    if (!document.getElementById(this._id)) {\n      console.error(`Не найден список с id=${this._id}`);\n      return;\n    }\n    this._initListPlugin();\n    this.filterList();\n  }\n}\n\nclass CheckboxSelect {\n  constructor(el) {\n    this.el = el;\n    this.toggle = this.el.querySelector('.js-select-checkbox-toggle');\n    this.valueEl = this.el.querySelector('.js-select-checkbox-value');\n    this.checkboxes = Array.from(this.el.querySelectorAll('input[type=\"checkbox\"]'));\n  }\n\n  init() {\n    const that = this;\n\n    this.valueEl.textContent = this.checkboxes.filter((item) => item.checked).length;\n\n    this.toggle.addEventListener('click', (e) => {\n      this.el.classList.toggle('active');\n    });\n\n    this.checkboxes.forEach((item) => {\n      item.addEventListener('change', this.changeCurrentValue.bind(this));\n    });\n\n    document.addEventListener('click', (e) => {\n      if (!$(e.target).closest(that.el).length && that.el.classList.contains('active')) {\n        that.el.classList.remove('active');\n      }\n    });\n  }\n\n  changeCurrentValue() {\n    this.valueEl.textContent = this.checkboxes.filter((item) => item.checked).length;\n  }\n\n  documentClickHandler() {\n\n  }\n}\n\nclass FileInput {\n  static createImage(file) {\n    const img = document.createElement('img');\n\n    img.src = URL.createObjectURL(file);\n    img.alt = file.name;\n    img.setAttribute('data-object-fit', 'cover');\n\n    return img;\n  }\n\n  static createVideo(file) {\n    const video = document.createElement('video');\n\n    video.src = URL.createObjectURL(file);\n    video.setAttribute('data-object-fit', 'cover');\n\n    return video;\n  }\n\n  static createListItem(file, index) {\n    const div = document.createElement('div');\n\n    div.className = 'file-input__item responsive-img';\n    div.setAttribute('data-index', index);\n\n    if (/^image\\//.test(file.type)) {\n      div.append(FileInput.createImage(file));\n    } else if (/^video\\//.test(file.type)) {\n      div.append(FileInput.createVideo(file));\n    }\n\n    return div;\n  }\n\n  constructor(el) {\n    this._files = [];\n    this.el = el;\n    this.max = el.dataset.max;\n    this.input = el.querySelector('.js-file-input-control');\n    // this.imageList = el.querySelector('.js-file-input-list');\n    this.dropdown = el.querySelector('.js-file-input-dropdown');\n    this.dropdownValue = this.dropdown.querySelector('.js-file-input-dropdown-value');\n    this.dropdownList = this.dropdown.querySelector('.js-file-input-dropdown-list');\n\n    this.input.addEventListener('change', this.addFiles.bind(this));\n  }\n\n  getFiles() {\n    return this._files;\n  }\n\n  addFiles() {\n    const newFiles = this.input.files;\n\n    for (const file of newFiles) {\n      const listItem = FileInput.createListItem(file, this._files.length);\n      this._files.push(file);\n\n      if (this._files.length <= this.max) {\n        this.dropdown.before(listItem);\n      } else {\n        this.updateDropdown(listItem);\n      }\n    }\n  }\n\n  updateDropdown(el) {\n    this.dropdownValue.innerText = `+${this._files.length - this.max}`;\n    this.dropdownList.append(el);\n\n    if (this.dropdown.classList.contains('hidden')) {\n      this.dropdown.classList.remove('hidden');\n    }\n  }\n}\n\nconst APP = {\n  initBefore() {\n    utils.polyfills();\n    utils.svgIcons();\n    document.documentElement.className = document.documentElement.className.replace('no-js', 'js');\n  },\n\n  init() {\n    utils.detectIE();\n    APP.lazyload();\n\n    const myMask = new Mask('.js-tel');\n    myMask.init();\n\n    APP.buttons();\n    // APP.closeOnFocusLost();\n\n    this.initParallax();\n    this.initFirstSlider();\n    this.initReviewsSlider();\n    this.initArticlesSlider();\n    this.initProfileSlider();\n    this.initAccordion();\n    this.initCalendar();\n    this.initTabs();\n    this.initPriceList();\n    this.addFormValidate();\n    this.initSelect();\n    this.initStarsSelect();\n    this.initRatingSelect();\n    this.initCheckboxSelect();\n    this.initPerformersMap();\n    this.initPerformersFilter();\n    this.initRangeSLider();\n    this.initModals();\n    this.initGallery();\n\n    this.initFileInput();\n    this.initAvatarInput();\n    this.initScrollBlock();\n    this.initAddPetBlock();\n    this.initPetCardEvents();\n    this.initBirthdayCalendar();\n    this.initDeleteBlock();\n  },\n\n  initOnLoad() {\n    utils.truncateText(document.querySelectorAll('.js-dot'));\n  },\n\n  buttons() {\n    Array.prototype.forEach.call(\n      document.querySelectorAll('.js-mobile-menu-button'), (item) => {\n        item.addEventListener('click', () => {\n          document.body.classList.toggle('nav-showed');\n        });\n      },\n    );\n    Array.from(document.querySelectorAll('.js-link-anchor')).forEach((item) => {\n      item.addEventListener('click', (e) => {\n        e.preventDefault();\n        const position = $($(e.currentTarget).attr('href')).offset().top;\n\n        $('html, body').animate({\n          scrollTop: `${position}px`,\n        }, {\n          duration: 500,\n          easing: 'swing',\n        });\n      });\n    });\n  },\n\n  // closeOnFocusLost() {\n  //   document.addEventListener('click', (e) => {\n  //     const trg = e.target;\n  //     if (!trg.closest('.header')) {\n  //       document.body.classList.remove('nav-showed');\n  //     }\n  //   });\n  // },\n\n  lazyload() {\n    function update() {\n      APP.myLazyLoad.update();\n      APP.objectFitFallback(document.querySelectorAll('[data-object-fit]'));\n    }\n\n    function regularInit() {\n      APP.myLazyLoad = new LazyLoad({\n        elements_selector: '.lazyload',\n        callback_error(el) {\n          el.parentElement.classList.add('lazyload-error');\n        },\n      });\n      APP.objectFitFallback(document.querySelectorAll('[data-object-fit]'));\n    }\n\n    if (typeof APP.myLazyLoad === 'undefined') {\n      regularInit();\n    } else {\n      update();\n    }\n  },\n\n  objectFitFallback(selector) {\n    // if (true) {\n    if ('objectFit' in document.documentElement.style === false) {\n      for (let i = 0; i < selector.length; i++) {\n        const that = selector[i];\n        const imgUrl = that.getAttribute('src') ? that.getAttribute('src') : that.getAttribute('data-src');\n        const dataFit = that.getAttribute('data-object-fit');\n        let fitStyle;\n        if (dataFit === 'cover') {\n          fitStyle = 'cover';\n        } else {\n          fitStyle = 'contain';\n        }\n        const parent = that.parentElement;\n        if (imgUrl) {\n          parent.style.backgroundImage = `url(${imgUrl})`;\n          parent.classList.add('fit-img');\n          parent.classList.add(`fit-img--${fitStyle}`);\n        }\n      }\n    }\n  },\n\n  initParallax() {\n    const scenes = Array.from(document.querySelectorAll('.js-scene'));\n\n    scenes.forEach((item) => {\n      const parallaxInstance = new Parallax(item);\n    });\n  },\n\n  initFirstSlider() {\n    const sliderBlock = document.querySelector('.js-first-slider');\n\n    if (sliderBlock) {\n      const firstSlider = new Swiper(sliderBlock, {\n        speed: 800,\n        effect: 'fade',\n        fadeEffect: {\n          crossFade: true,\n        },\n        watchOverflow: true,\n        navigation: {\n          prevEl: '.js-first-prev-button',\n          nextEl: '.js-first-next-button',\n        },\n        pagination: {\n          el: '.js-first-pagination',\n        },\n      });\n    }\n  },\n\n  initReviewsSlider() {\n    const sliderBlock = document.querySelector('.js-reviews-slider');\n    const thumbSLiderBlock = document.querySelector('.js-thumb-reviews-slider');\n\n    if (sliderBlock && thumbSLiderBlock) {\n      const thumbSLider = new Swiper(thumbSLiderBlock, {\n        watchOverflow: true,\n        speed: 800,\n        effect: 'fade',\n        allowTouchMove: false,\n        fadeEffect: {\n          crossFade: true,\n        },\n      });\n\n      const slider = new Swiper(sliderBlock, {\n        watchOverflow: true,\n        speed: 800,\n        spaceBetween: 30,\n        thumbs: {\n          swiper: thumbSLider,\n        },\n        navigation: {\n          prevEl: '.js-reviews-prev-button',\n          nextEl: '.js-reviews-next-button',\n        },\n        pagination: {\n          el: '.js-reviews-pagination',\n        },\n      });\n    }\n  },\n\n  initArticlesSlider() {\n    const sliderBlock = document.querySelector('.js-articles-slider');\n\n    if (sliderBlock) {\n      const articlesSlider = new Swiper(sliderBlock, {\n        speed: 800,\n        watchOverflow: true,\n        spaceBetween: 43,\n        slidesPerView: 1,\n        navigation: {\n          prevEl: '.js-articles-prev-button',\n          nextEl: '.js-articles-next-button',\n        },\n        pagination: {\n          el: '.js-articles-pagination',\n        },\n        breakpoints: {\n          1200: {\n            slidesPerView: 3,\n          },\n        },\n      });\n    }\n  },\n\n  initProfileSlider() {\n    const sliderBlock = document.querySelector('.js-profile-slider');\n\n    if (sliderBlock) {\n      const profileSlider = new Swiper(sliderBlock, {\n        speed: 800,\n        slidesPerView: 1,\n        spaceBetween: 10,\n        navigation: {\n          prevEl: '.js-profile-prev',\n          nextEl: '.js-profile-next',\n        },\n        breakpoints: {\n          768: {\n            slidesPerView: 'auto',\n          },\n        },\n      });\n    }\n  },\n\n  initAccordion() {\n    if (document.querySelector('.js-accordion')) {\n      const accordion = new Accordion('.js-accordion', {\n        closeOthers: false,\n      });\n    }\n  },\n\n  initCalendar() {\n    const calendarBlocks = Array.from(document.querySelectorAll('.js-calendar'));\n\n    if (calendarBlocks.length) {\n      calendarBlocks.forEach((calendar) => {\n        const datePicker = calendar.querySelector('.js-datepicker');\n        const startDateinput = calendar.querySelector('.js-start-date');\n        const endDateinput = calendar.querySelector('.js-end-date');\n\n        $(datePicker).datepicker({\n          range: true,\n          dateFormat: 'd M yyyy',\n          minDate: new Date(),\n          onSelect(formattedDate) {\n            const [startDate, endDate] = formattedDate.split(',');\n\n            startDateinput.value = startDate;\n\n            if (endDate) {\n              endDateinput.value = endDate;\n            }\n          },\n        });\n      });\n    }\n  },\n\n  initBirthdayCalendar(el = document) {\n    const calendars = Array.from(el.querySelectorAll('.js-birthday-calendar'));\n\n    if (calendars.length) {\n      calendars.forEach((item) => {\n        const { myDate } = item.dataset;\n\n        $(item).datepicker({\n          autoClose: true,\n        });\n\n        if (myDate) {\n          $(item).datepicker().data('datepicker').selectDate(new Date(myDate));\n        }\n      });\n    }\n  },\n\n  initTabs() {\n    const tabBlocks = Array.from(document.querySelectorAll('.js-tabs'));\n\n    if (tabBlocks.length) {\n      tabBlocks.forEach((block) => {\n        $(block).responsiveTabs({\n          duration: 500,\n          setHash: block.hasAttribute('data-hash'),\n          activate(evt, tab) {\n            const tabThumb = block.querySelector('.js-tabs-thumb');\n            if (tabThumb) {\n              setTimeout(() => {\n                const activeTab = tab.tab[0];\n                const navigationCoords = activeTab.parentElement.getBoundingClientRect();\n                const activeTabCoords = activeTab.getBoundingClientRect();\n\n                tabThumb.style.width = `${activeTab.offsetWidth}px`;\n                tabThumb.style.left = `${activeTabCoords.left - navigationCoords.left}px`;\n              }, 100);\n            }\n          },\n        });\n      });\n    }\n  },\n\n  initPriceList() {\n    const listBlock = document.querySelector('.js-price-list');\n\n    if (listBlock) {\n      const listToggles = Array.from(listBlock.querySelectorAll('.js-list-toggle'));\n      const priceList = new MyList(listBlock, listBlock.dataset.id);\n\n      listToggles.forEach((item) => {\n        item.addEventListener('click', (evt) => {\n          evt.preventDefault();\n          if (!evt.currentTarget.classList.contains('active')) {\n            priceList.navItemRemoveActive();\n            priceList.itemsToggleAnimated(false);\n            evt.currentTarget.classList.add('active');\n            priceList.filterList();\n          }\n        });\n      });\n    }\n  },\n\n  addFormValidate() {\n    const forms = Array.from(document.querySelectorAll('form.js-validate'));\n\n    if (forms.length) {\n      forms.forEach((el) => {\n        if (!el.classList.contains('validation')) {\n          this.formValidate(el);\n        }\n      });\n    }\n  },\n\n  formValidate(el) {\n    const $form = $(el);\n    el.classList.add('validation');\n\n    $.validator.methods.email = function(value, element) {\n      return this.optional(element) || /[a-z]+@[a-z]+\\.[a-z]+/.test(value);\n    };\n\n    $.validator.addMethod('compareValue', function(value, element) {\n      const compareValue = this.findByName(element.dataset.compareName).val();\n      return value === compareValue;\n    });\n\n    $form.validate({\n      wrapper: 'p',\n      errorElement: 'span',\n      rules: {\n        phone: {\n          mobileRU: true,\n        },\n        email: {\n          email: true,\n        },\n        passwordRepeat: {\n          compareValue: true,\n        },\n        'repeat-new-pass': {\n          compareValue: true,\n        },\n      },\n      errorPlacement(error, element) {\n        if (element.attr('type') === 'checkbox') {\n          return element.next('label').append(error);\n        }\n        return false;\n      },\n      highlight(element) {\n        $(element).addClass('error').parent().addClass('error');\n      },\n      unhighlight(element) {\n        $(element).removeClass('error').parent().removeClass('error');\n      },\n      submitHandler(form) {\n        const formData = new FormData(form);\n        const fileInput = form.querySelector('.js-file-input');\n\n        if (fileInput) {\n          const cacheFileInput = utils.cache.fileInputs.get(fileInput);\n          formData.set('files', cacheFileInput.getFiles());\n        }\n\n        $.ajax({\n          url: form.action,\n          data: formData,\n          processData: false,\n          contentType: false,\n          type: 'POST',\n          success: () => {\n            form.reset();\n            $.magnificPopup.close();\n          },\n        });\n      },\n    });\n  },\n\n  selectOptions: {\n    minimumResultsForSearch: Infinity,\n    width: 'resolve',\n  },\n\n  initSelect(el) {\n    const doc = el || document;\n    const selects = Array.from(doc.querySelectorAll('.js-select'));\n\n    if (selects.length) {\n      const options = { ...APP.selectOptions };\n      selects.forEach((item) => {\n        if (item.hasAttribute('data-placeholder')) {\n          APP.selectOptions.placeholder = item.dataset.placeholder;\n        }\n\n        $(item).select2({\n          ...options,\n          dropdownParent: $(item).parent(),\n        });\n\n        $(item).on('select2:select', (e) => {\n          const select = e.currentTarget;\n          select.classList.remove('error');\n          select.parentElement.classList.remove('error');\n        });\n      });\n    }\n  },\n\n  initStarsSelect() {\n    const selectStars = Array.from(document.querySelectorAll('.js-select-stars'));\n\n    const formatStarState = (state) => {\n      if (!state.id) {\n        return state.text;\n      }\n\n      const MAX_STARS = 5;\n      const { element } = state;\n      const { stars, quantity } = element.dataset;\n      let starString = '';\n\n      for (let i = 1; i <= MAX_STARS; i++) {\n        if (i > stars) {\n          starString += '<span class=\"star\"><i class=\"fas fa-star\"></i></span>';\n        } else {\n          starString += '<span class=\"star star--yellow\"><i class=\"fas fa-star\"></i></span>';\n        }\n      }\n\n      return $(`<span>${starString} (${quantity})</span>`);\n    };\n\n    if (selectStars.length) {\n      const options = { ...APP.selectOptions };\n\n      selectStars.forEach((item) => {\n        if (item.hasAttribute('data-placeholder')) {\n          options.placeholder = item.dataset.placeholder;\n        }\n\n        $(item).select2({\n          ...options,\n          dropdownParent: $(item).parent(),\n          templateResult: formatStarState,\n          templateSelection: formatStarState,\n        });\n\n        $(item).on('select2:select', (e) => {\n          const select = e.currentTarget;\n          select.classList.remove('error');\n          select.parentElement.classList.remove('error');\n        });\n      });\n    }\n  },\n\n  initRatingSelect() {\n    const selectRating = Array.from(document.querySelectorAll('.js-select-rating'));\n\n    const formatStarStateResult = (state) => {\n      if (!state.id) {\n        return 'state.text';\n      }\n\n      const { element } = state;\n      const { stars } = element.dataset;\n      let starString = '';\n\n      for (let i = 1; i <= stars; i++) {\n        starString += '<span class=\"star star--yellow\"><i class=\"fas fa-star\"></i></span>';\n      }\n\n      return $(`<span>${starString}</span>`);\n    };\n\n    const formatStarStateSelection = (state) => {\n      if (!state.id) {\n        return state.text;\n      }\n\n      const { element } = state;\n      const { stars } = element.dataset;\n      let starString = '';\n\n      for (let i = 1; i <= stars; i++) {\n        starString += '<span class=\"star star--yellow\"><i class=\"fas fa-star\"></i></span>';\n      }\n\n      return $(`<span>Рейтинг от ${starString}</span>`);\n    };\n\n    if (selectRating.length) {\n      const options = { ...APP.selectOptions };\n      selectRating.forEach((item) => {\n        if (item.hasAttribute('data-placeholder')) {\n          options.placeholder = item.dataset.placeholder;\n        }\n\n        $(item).select2({\n          ...options,\n          dropdownParent: $(item).parent(),\n          templateResult: formatStarStateResult,\n          templateSelection: formatStarStateSelection,\n        });\n\n        $(item).on('select2:select', (e) => {\n          const select = e.currentTarget;\n          select.classList.remove('error');\n          select.parentElement.classList.remove('error');\n        });\n      });\n    }\n  },\n\n  performersDataMap: {\n    sticky: null,\n  },\n\n  initPerformersMap() {\n    const stickyMap = document.querySelector('.js-sticky-map');\n\n    if (stickyMap) {\n      if (utils.getScreenSize() >= utils.mediaBreakpoint.lg) {\n        this.performersDataMap.sticky = new Sticky('.js-sticky-map');\n      }\n\n      window.addEventListener('resize', () => {\n        if (utils.getScreenSize() >= utils.mediaBreakpoint.lg && !APP.performersDataMap.sticky) {\n          APP.performersDataMap.sticky = new Sticky('.js-sticky-map');\n        } else if (utils.getScreenSize() < utils.mediaBreakpoint.lg && APP.performersDataMap.sticky) {\n          APP.performersDataMap.sticky.destroy();\n          APP.performersDataMap.sticky = null;\n        }\n      });\n    }\n  },\n\n  initPerformersFilter() {\n    const filter = document.querySelector('.js-performers-filter');\n\n    if (filter) {\n      const toggleButton = filter.querySelector('.js-performers-filter-toggle');\n\n      toggleButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        filter.classList.toggle('active');\n      });\n    }\n  },\n\n  initCheckboxSelect() {\n    const selects = Array.from(document.querySelectorAll('.js-select-checkbox'));\n\n    if (selects.length) {\n      selects.forEach((item) => {\n        const select = new CheckboxSelect(item);\n\n        select.init();\n      });\n    }\n  },\n\n  initRangeSLider() {\n    const sliders = Array.from(document.querySelectorAll('.js-range'));\n\n    if (sliders.length) {\n      sliders.forEach((item) => {\n        const inputs = Array.from(item.parentElement.querySelectorAll('.js-range-value'));\n        const {\n          min,\n          max,\n          step,\n          startMin,\n          startMax,\n        } = item.dataset;\n\n        noUiSlider.create(item, {\n          start: [parseFloat(startMin), parseFloat(startMax)],\n          connect: true,\n          step: parseFloat(step),\n          range: {\n            min: parseFloat(min),\n            max: parseFloat(max),\n          },\n          tooltips: [true, true],\n          format: wNumb({\n            decimals: step > 0 ? 0 : 1,\n          }),\n        });\n\n        if (inputs.length) {\n          const inputMin = inputs[0];\n          const inputMax = inputs[1];\n          item.noUiSlider.on('update', (values, handle) => {\n            const value = values[handle];\n            if (handle) {\n              inputMax.value = value;\n            } else {\n              inputMin.value = value;\n            }\n          });\n        }\n      });\n    }\n  },\n\n  initModals() {\n    const callbacks = {\n      ajaxContentAdded() {\n        const $modalContent = $(this.content);\n\n        if ($modalContent.find('.js-validate').length) {\n          $modalContent.find('.js-validate').each((id, el) => {\n            APP.formValidate(el);\n          });\n        }\n\n        if ($modalContent.find('.js-select').length) {\n          APP.initSelect(this.content[0]);\n        }\n\n        if ($modalContent.find('.js-tel')) {\n          const myMask = new Mask('.js-tel');\n          myMask.init();\n        }\n\n        if ($modalContent.find('.js-file-input')) {\n          const { fileInputs } = utils.cache;\n          $modalContent.find('.js-file-input').each((id, el) => {\n            fileInputs.set(el, new FileInput(el));\n          });\n        }\n      },\n      open() {\n        document.body.classList.remove('nav-showed');\n      },\n      close() {\n        const $modalContent = $(this.content);\n\n        if ($modalContent.find('.js-file-input')) {\n          const { fileInputs } = utils.cache;\n          $modalContent.find('.js-file-input').each((id, el) => {\n            fileInputs.delete(el);\n          });\n        }\n      },\n    };\n\n    const options = {\n      removalDelay: 500,\n      mainClass: 'mfp-fade',\n      fixedContentPos: true,\n      fixedBgPos: true,\n      showCloseBtn: false,\n    };\n\n    $('.js-ajax-modal').magnificPopup({\n      type: 'ajax',\n      callbacks,\n      ...options,\n    });\n\n    $('.js-inline-modal').magnificPopup({\n      type: 'inline',\n      ...options,\n      callbacks: {\n        open() {\n          const $modalContent = $(this.content);\n\n          if ($modalContent.find('.js-tabs')) {\n            $modalContent.find('.js-tabs').each((id, el) => {\n              $(el).responsiveTabs('activate', 0);\n            });\n          }\n        },\n      },\n    });\n  },\n\n  initGallery() {\n    const galleries = Array.from(document.querySelectorAll('.js-gallery'));\n\n    if (galleries.length) {\n      galleries.forEach((gallery) => {\n        $(gallery).magnificPopup({\n          type: 'image',\n          delegate: 'a',\n          removalDelay: 500,\n          mainClass: 'mfp-fade',\n          fixedContentPos: true,\n          fixedBgPos: true,\n          gallery: {\n            enabled: true,\n            navigateByImgClick: true,\n            preload: [0, 1],\n          },\n          callbacks: {\n            elementParse(item) {\n              const { type } = item.el[0].dataset;\n              item.type = type;\n            },\n          },\n        });\n      });\n    }\n  },\n\n  initFileInput(el) {\n    const { fileInputs } = utils.cache;\n    const doc = el || document;\n    const elements = Array.from(doc.querySelectorAll('.js-file-input'));\n\n    if (elements.length) {\n      elements.forEach((item) => {\n        fileInputs.set(item, new FileInput(item));\n      });\n    }\n  },\n\n  initAvatarInput() {\n    const avatarInputs = Array.from(document.querySelectorAll('.js-avatar-input'));\n\n    function createImage() {\n      const img = document.createElement('img');\n      img.setAttribute('data-object-fit', 'cover');\n\n      return img;\n    }\n\n    if (avatarInputs.length) {\n      avatarInputs.forEach((inputBlock) => {\n        inputBlock.addEventListener('change', (e) => {\n          const file = e.target.files[0];\n          let img = e.currentTarget.querySelector('img');\n\n          if (img) {\n            img.src = URL.createObjectURL(file);\n          } else {\n            img = createImage();\n            img.src = URL.createObjectURL(file);\n            e.currentTarget.querySelector('.js-avatar-image').append(img);\n          }\n        });\n      });\n    }\n  },\n\n  initScrollBlock() {\n    const scrollBlocks = Array.from(document.querySelectorAll('.js-scroll-block'));\n\n    if (scrollBlocks.length) {\n      scrollBlocks.forEach((item) => {\n        const { axis = 'y' } = item.dataset;\n\n        $(item).mCustomScrollbar({\n          axis,\n        });\n      });\n    }\n  },\n\n  initAddPetBlock() {\n    const addPetBlock = document.querySelector('.js-add-pet');\n\n    function toggleAddPetBlock() {\n      const { width, left } = addPetBlock.getBoundingClientRect();\n      const { clientWidth } = document.documentElement;\n      const translateX = clientWidth - left - width;\n\n      addPetBlock.style.transform = `translate3d(${translateX}px, 0, 0)`;\n      addPetBlock.classList.toggle('active');\n    }\n\n    function closeAddPetBlock() {\n      addPetBlock.style.transform = 'translate3d(0, 0, 0)';\n      addPetBlock.classList.remove('active');\n    }\n\n    if (addPetBlock) {\n      const toggleButton = document.querySelector('.js-add-pet-toggle');\n\n      toggleButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        toggleAddPetBlock();\n      });\n\n      document.addEventListener('click', (e) => {\n        if (!e.target.closest('.js-add-pet.active') && addPetBlock.classList.contains('active')) {\n          closeAddPetBlock();\n        }\n      });\n\n      window.addEventListener('resize', () => {\n        if (addPetBlock.classList.contains('active')) {\n          closeAddPetBlock();\n        }\n      });\n    }\n  },\n\n  initDeleteBlock(el = document) {\n    const CONTENT_PADDING_BOTTOM = 40;\n    const blocks = Array.from(el.querySelectorAll('.js-delete'));\n\n    function toggleActiveDeleteHandler(e) {\n      e.preventDefault();\n      const deleteBlock = e.currentTarget.closest('.js-delete');\n      const { top, height } = deleteBlock.getBoundingClientRect();\n      const deleteDropdown = deleteBlock.querySelector('.js-delete-dropdown');\n      const isTopDropdown = document.documentElement.clientHeight - height - top - CONTENT_PADDING_BOTTOM < deleteDropdown.offsetHeight;\n\n      blocks\n        .filter((item) => item.classList.contains('active') && item !== deleteBlock)\n        .forEach((item) => item.classList.remove('active'));\n\n      if (!deleteBlock.classList.contains('active')) {\n        if (isTopDropdown) {\n          deleteDropdown.classList.add('b-delete__dropdown--top');\n        } else {\n          deleteDropdown.classList.remove('b-delete__dropdown--top');\n        }\n      }\n\n      deleteBlock.classList.toggle('active');\n    }\n\n    function closeDeleteHandler(e) {\n      e.preventDefault();\n      const deleteBlock = e.currentTarget.closest('.js-delete');\n\n      deleteBlock.classList.remove('active');\n    }\n\n    function deleteHandler(e) {\n      e.preventDefault();\n      const deleteButton = e.currentTarget;\n      const deleteBlock = deleteButton.closest('.js-delete');\n      const { classElement, url } = deleteButton.dataset;\n      const deleteElement = deleteBlock.closest(`.${classElement}`);\n\n      deleteElement.classList.add('deleted');\n      deleteBlock.classList.remove('active');\n\n      $.get(url)\n        .done(() => {\n          const toggleButton = deleteBlock.querySelector('.js-delete-toggle');\n          const noButton = deleteBlock.querySelector('.js-delete-no');\n          const yesButton = deleteBlock.querySelector('.js-delete-yes');\n\n          toggleButton.removeEventListener('click', toggleActiveDeleteHandler);\n          noButton.removeEventListener('click', closeDeleteHandler);\n          yesButton.removeEventListener('click', deleteHandler);\n\n          deleteElement.remove();\n        })\n        .fail(() => {\n          deleteElement.classList.remove('deleted');\n        });\n    }\n\n    if (blocks.length) {\n      blocks.forEach((block) => {\n        const toggle = block.querySelector('.js-delete-toggle');\n        const noButton = block.querySelector('.js-delete-no');\n        const yesButton = block.querySelector('.js-delete-yes');\n\n        toggle.addEventListener('click', toggleActiveDeleteHandler);\n        noButton.addEventListener('click', closeDeleteHandler);\n        yesButton.addEventListener('click', deleteHandler);\n      });\n\n      document.addEventListener('click', (e) => {\n        if (!e.target.closest('.js-delete.active')) {\n          blocks\n            .filter((item) => item.classList.contains('active'))\n            .forEach((item) => item.classList.remove('active'));\n        }\n      });\n    }\n  },\n\n  initPetCardEvents() {\n    const cards = Array.from(document.querySelectorAll('.js-pet-card'));\n\n    if (cards.length) {\n      cards.forEach((item) => {\n        const toggleButton = item.querySelector('.js-pet-card-toggle');\n        const hideBlock = item.querySelector('.js-pet-card-hide');\n        const { activeContent, inactiveContent } = toggleButton.dataset;\n\n        toggleButton.addEventListener('click', (e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const activeCards = Array.from(document.querySelectorAll('.js-pet-card.active')).filter((card) => card !== item);\n\n          if (activeCards.length) {\n            activeCards.forEach((card) => {\n              const hideBlockOther = card.querySelector('.js-pet-card-hide');\n              card.classList.remove('active');\n              $(hideBlockOther).slideUp();\n            });\n          }\n\n          item.classList.toggle('active');\n\n          if (item.classList.contains('active')) {\n            $(hideBlock).slideDown();\n            this.textContent = activeContent;\n          } else {\n            $(hideBlock).slideUp();\n            this.textContent = inactiveContent;\n          }\n        });\n      });\n\n      document.addEventListener('click', (e) => {\n        if (!e.target.closest('.js-pet-card.active')) {\n          const activeEl = document.querySelector('.js-pet-card.active');\n          if (activeEl) {\n            const hideBlock = activeEl.querySelector('.js-pet-card-hide');\n            const toggleButton = activeEl.querySelector('.js-pet-card-toggle');\n            const { inactiveContent } = toggleButton.dataset;\n            activeEl.classList.remove('active');\n            $(hideBlock).slideUp();\n            toggleButton.textContent = inactiveContent;\n          }\n        }\n      });\n    }\n  },\n};\n\nAPP.initBefore();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  APP.init();\n});\n\nwindow.onload = () => {\n  APP.initOnLoad();\n};\n"]}